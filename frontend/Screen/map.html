<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Map</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="center">
  <div class="phone">

    <h1 class="title" id="map-title">Map</h1>

    <!-- Google Map -->
    <div class="map-area">
      <iframe
        src="https://www.google.com/maps?q=函館市&output=embed"
        width="100%"
        height="100%"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
      ></iframe>
    </div>
   
    <!-- 写真アップロードボタン -->
     <a href="photo upload.html" class="upload-btn">写真をアップロード</a>
     <a href="journey.html" class="back-btn">Back</a>

  </div>

  <script>
    // 星座名を受け取る（今後使える）
    const params = new URLSearchParams(location.search);
    const name = params.get("name");

    if (name) {
      document.getElementById("map-title").textContent =
        name.toUpperCase() + " Map";
    }
  </script>

  <script>
  const toggle = document.getElementById("darkToggle");

  // ページ読み込み時：保存状態を復元
  const isDark = localStorage.getItem("darkMode") === "on";
  document.body.classList.toggle("dark", isDark);
  toggle.checked = isDark;

  // トグル変更時：保存
  toggle.addEventListener("change", () => {
    if (toggle.checked) {
      document.body.classList.add("dark");
      localStorage.setItem("darkMode", "on");
    } else {
      document.body.classList.remove("dark");
      localStorage.setItem("darkMode", "off");
    }
  });

  /* ===== Star Effect ===== */
  const starToggle = document.getElementById("starToggle");
  const stars = document.getElementById("stars");

  // 星を生成
  function createStars() {
    stars.innerHTML = "";
    for (let i = 0; i < 60; i++) {
      const star = document.createElement("div");
      star.className = "star";
      star.style.top = Math.random() * 100 + "%";
      star.style.left = Math.random() * 100 + "%";
      star.style.animationDelay = Math.random() * 3 + "s";
      stars.appendChild(star);
    }
  }

  // 保存状態復元
  const starOn = localStorage.getItem("starEffect") !== "off";
  starToggle.checked = starOn;
  if (starOn) createStars();

  // ON/OFF切り替え
  starToggle.addEventListener("change", () => {
    if (starToggle.checked) {
      createStars();
      localStorage.setItem("starEffect", "on");
    } else {
      stars.innerHTML = "";
      localStorage.setItem("starEffect", "off");
    }
  });
</script>

</body>
</html>
