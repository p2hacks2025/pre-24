<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Photo Detail</title>
  <link rel="stylesheet" href="album.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <h1>Photo Detail</h1>

  <!-- 元の仮の写真詳細 -->
  <div id="photo-detail"></div>

  <!-- アルバム写真を表示するコンテナ -->
  <div class="album-container" id="album-container"></div>

  <div id="comment-frame">
    <p>ここにコメントが入ります（仮）</p>
  </div>

  <a href="album.html" class="btn">Back to Album</a>
  <div class="small-box">
    <img src="images/album_detail_ex2.png" alt="アルバム詳細画像">
  </div>

  <script>
    // URLパラメータから星座名を取得
    const params = new URLSearchParams(window.location.search);
    const starName = params.get("id"); // album.html の ?id=aries など

    // 元の仮データ表示（必要なら残す）
    const photos = {
      1: { desc: "写真1の詳細を表示中" },
      2: { desc: "写真2の詳細を表示中" },
      3: { desc: "写真3の詳細を表示中" }
    };

    // 仮データ表示
    if (photos[starName]) {
      document.getElementById("photo-detail").innerHTML = `<p>${photos[starName].desc}</p>`;
    } else {
      document.getElementById("photo-detail").innerHTML = "<p>写真が見つかりません</p>";
    }

    // ===== サーバーから星座フォルダ内の写真を取得して表示 =====
    async function loadAlbum() {
      try {
        const res = await fetch(`http://localhost:3000/albums/${starName}`);
        const images = await res.json();

        const container = document.getElementById("album-container");
        container.innerHTML = ""; // 既存内容クリア

        if (images.length === 0) {
          container.innerHTML = "<p>まだ写真がありません</p>";
          return;
        }

        images.forEach(src => {
          const img = document.createElement("img");
          img.src = "http://localhost:3000" + src;
          img.style.width = "150px";
          img.style.margin = "10px";
          container.appendChild(img);
        });
      } catch (err) {
        console.error(err);
      }
    }

    loadAlbum();
  </script>
</body>
</html>
